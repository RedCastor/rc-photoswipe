{"version":3,"sources":["rc-photoswipe.js","tpls-photoswipe.js"],"names":["rcPhotoswipe","angular","Photoswipe","rcPhotoswipeDirective","$compile","$templateRequest","linkFn","scope","iElement","iAttrs","startGallery","pswpElement","document","querySelectorAll","isUndefined","options","getThumbBoundsFn","isDefined","slideSelector","merge","index","thumbnail","pageYScroll","window","pageYOffset","documentElement","scrollTop","rect","getBoundingClientRect","x","left","y","top","w","width","gallery","PhotoSwipe","PhotoSwipeUI_Default","slides","init","item","currItem","console","log","listen","safeApply","onClose","noop","renderTemplate","_templatePath","then","html","template","element","append","$broadcast","templatePath","templateUrl","$watch","start","open","nVal","oVal","close","fn","phase","this","$root","$$phase","$apply","$on","restrict","replace","link","module","directive","define","amd","exports","require","global","run","$templateCache","put"],"mappings":"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","file":"rc-photoswipe.js","sourcesContent":["/*\n\trc-photoswipe v1.0.0\n\t2017 Auban le Grelle <auban@viamonkey.com>\n\t(c) 2016 Massimiliano Sartoretto <massimilianosartoretto@gmail.com>\n\tLicense: MIT\n*/\n\n'format amd';\n/* global define */\n\n(function () {\n  'use strict';\n\n  function rcPhotoswipe(angular, Photoswipe) {\n\n\n    function rcPhotoswipeDirective($compile, $templateRequest) {\n\n      function linkFn(scope, iElement, iAttrs) {\n\n        var startGallery = function () {\n          var pswpElement = document.querySelectorAll('.pswp')[0];\n\n          if (angular.isUndefined(scope.options.getThumbBoundsFn) &&\n            angular.isDefined(scope.slideSelector)) {\n\n            scope.options = angular.merge({}, {\n\n              getThumbBoundsFn: function(index) {\n                var thumbnail = document.querySelectorAll(scope.slideSelector)[index];\n                var pageYScroll = window.pageYOffset || document.documentElement.scrollTop;\n                var rect = thumbnail.getBoundingClientRect();\n                return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};\n              }\n\n            }, scope.options);\n          }\n\n          scope.gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default || false, scope.slides, scope.options);\n          scope.gallery.init();\n          scope.item = scope.gallery.currItem;\n\n          console.log(scope.gallery);\n\n          scope.gallery.listen('destroy', function () {\n            scope.safeApply(function () {\n              (scope.onClose || angular.noop)();\n            });\n          });\n\n          scope.gallery.listen('afterChange', function () {\n            scope.safeApply(function () {\n              scope.item = scope.gallery.currItem;\n            });\n          });\n        };\n\n        function renderTemplate(_templatePath) {\n          if (angular.isDefined(_templatePath) && _templatePath !== '$NONE') {\n            $templateRequest(_templatePath).then(function (html) {\n              var template = angular.element(html);\n              iElement.append($compile(template)(scope));\n            });\n          }\n\n          scope.$broadcast('rcPhotoswipe.templateRendered');\n        }\n\n\n        var templatePath = scope.templateUrl || 'rc-photoswipe.tpl.html';\n\n        renderTemplate(templatePath);\n\n        scope.$watch('templateUrl', function () {\n          renderTemplate(scope.templateUrl);\n        });\n\n        scope.start = function () {\n          scope.open = true;\n          startGallery();\n        };\n\n        scope.$watch('open', function (nVal, oVal) {\n          console.log(nVal);\n          console.log(oVal);\n          if (nVal !== oVal) {\n            if (nVal) {\n              startGallery();\n            }\n          } else if (!nVal && scope.gallery) {\n            scope.gallery.close();\n            scope.gallery = null;\n          }\n        });\n\n        scope.safeApply = function(fn) {\n          var phase = this.$root.$$phase;\n          if(phase === '$apply' || phase === '$digest') {\n            if(fn && (typeof(fn) === 'function')) {\n              fn();\n            }\n          } else {\n            this.$apply(fn);\n          }\n        };\n\n        scope.$on('destroy', function () {\n          scope.gallery = null;\n        });\n      }\n\n      return {\n        restrict: 'AE',\n        replace: true,\n        scope: {\n          open: '=',\n          options: '=',\n          slides: '=',\n          slideSelector: '@',\n          templateUrl: '@',\n          onClose: '&'\n        },\n        link: linkFn\n      };\n\n    }\n\n    return angular\n      .module('rcPhotoswipe', [])\n      .directive('rcPhotoswipe', rcPhotoswipeDirective);\n  }\n\n  if (typeof define === 'function' && define.amd) {\n\t\tdefine(['angular', 'photoswipe'], rcPhotoswipe);\n\t} else if (typeof module !== 'undefined' && module && module.exports) {\n    rcPhotoswipe(angular, require('photoswipe'));\n\t\tmodule.exports = 'rcPhotoswipe';\n\t} else {\n    rcPhotoswipe(angular, (typeof global !== 'undefined' ? global : window).Photoswipe);\n\t}\n})();\n","angular.module('rcPhotoswipe').run(['$templateCache', function($templateCache) {$templateCache.put('rc-photoswipe.tpl.html','<div>\\n  <div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\\n    <div class=\"pswp__bg\"></div>\\n    <div class=\"pswp__scroll-wrap\">\\n\\n        <div class=\"pswp__container\">\\n            <div class=\"pswp__item\"></div>\\n            <div class=\"pswp__item\"></div>\\n            <div class=\"pswp__item\"></div>\\n        </div>\\n\\n        <div class=\"pswp__ui pswp__ui--hidden\">\\n            <div class=\"pswp__top-bar\">\\n\\n                <div class=\"pswp__counter\"></div>\\n\\n                <button class=\"pswp__button pswp__button--close\" title=\"Close (Esc)\"></button>\\n\\n                <button class=\"pswp__button pswp__button--share\" title=\"Share\"></button>\\n\\n                <button class=\"pswp__button pswp__button--fs\" title=\"Toggle fullscreen\"></button>\\n\\n                <button class=\"pswp__button pswp__button--zoom\" title=\"Zoom in/out\"></button>\\n\\n                <div class=\"pswp__preloader\">\\n                    <div class=\"pswp__preloader__icn\">\\n                      <div class=\"pswp__preloader__cut\">\\n                        <div class=\"pswp__preloader__donut\"></div>\\n                      </div>\\n                    </div>\\n                </div>\\n            </div>\\n\\n            <div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\">\\n                <div class=\"pswp__share-tooltip\"></div>\\n            </div>\\n\\n            <button class=\"pswp__button pswp__button--arrow--left\" title=\"Previous (arrow left)\">\\n            </button>\\n\\n            <button class=\"pswp__button pswp__button--arrow--right\" title=\"Next (arrow right)\">\\n            </button>\\n\\n            <div class=\"pswp__caption\">\\n                <div class=\"pswp__caption__center\"></div>\\n            </div>\\n        </div>\\n    </div>\\n  </div>\\n</div>\\n');}]);"],"sourceRoot":"dist"}